{% extends "appointment/base.html" %}

{% block content %}
<br>
<br>
<div class="w3-margin mb-3 row justify-content-center" >
    <div class="col-md-auto col-sm-auto col-lg-4 shadow-lg p-3 mb-5 bg-body rounded ">
        <h3 class="w3-center w3-margin" >Oporavak lozinke</h3>

{% if validlink %}

{% if form.errors %}
    <p class="p-5 fs-2 text-bg-danger " style="border-radius: 5px;">Lozinka mora biti duzine 8 karaktera. <br>Unesite dva puta novu lozinku.</p>
{% endif %}


<form method="post">
    {% csrf_token %}
    <label>Nova lozinka</label>
    <div class="d-flex flex-row w3-select" style="margin-top:-10px;">
        <input
        type="password" name="new_password1" id="id_new_password1" class="w3-select" required style="border:none;" />
        <button type="button" onclick="change()" id="show" style="border: none; background:none;">
            <i class="fa-solid fa-eye"></i>
        </button>
      </div>

    {% comment %} <input class="form-control" type="password" name="new_password1" autocomplete="new-password" required="" id="id_new_password1"> {% endcomment %}
    
    <label>Potvrdite Lozinku</label>
    <div class="d-flex flex-row w3-select" style="margin-top:-10px;">
        <input
        type="password" name="new_password2" id="id_new_password2" class="w3-select" required style="border:none;" />
        <button type="button" onclick="change2()" id="show2" style="border: none; background:none;">
            <i class="fa-solid fa-eye"></i>
        </button>
      </div>


    {% comment %} <input class="form-control" type="password" name="new_password2" autocomplete="new-password" required="" id="id_new_password2"> {% endcomment %}
    <br>
    <p><input class="btn btn-info"  type="submit" value="Promeni lozinku" /></p>
</form>
{% else %}
<p>Link za oporavan lozinke je nevazeci, molimo pokusajte ponovo</p>
{% endif %}
</div>
</div>

<script>
    var showPassword =  true
    var showPassword2 =  true

    var dugme = document.getElementById('show');
    var dugme2 = document.getElementById('show2');

    var pw = document.getElementById('id_new_password1');
    var pw2 = document.getElementById('id_new_password2');

    function change() {
      if (showPassword)
        {
            dugme.innerHTML = '<i class="fa-sharp fa-solid fa-eye-slash"></i>';
            showPassword  = !showPassword;
            pw.type = "text";
        }
      else {
        dugme.innerHTML = '<i class="fa-solid fa-eye"></i>'
        showPassword = !showPassword;
        pw.type = "password";
      }
    }

    function change2() {
        if (showPassword2)
          {
              dugme2.innerHTML = '<i class="fa-sharp fa-solid fa-eye-slash"></i>';
              showPassword2  = !showPassword2;
              pw2.type = "text";
          }
        else {
          dugme2.innerHTML = '<i class="fa-solid fa-eye"></i>'
          showPassword2 = !showPassword2;
          pw2.type = "password";
        }
      }
  
</script>
{% endblock %}
